# Jobs-to-Be-Done Schema
# Defines node types, edge types, and extraction guidance for JTBD causal structure

schema:
  name: "jobs_to_be_done"
  description: "JTBD causal structure linking circumstances and struggles to functional, emotional, and social jobs, desired outcomes, and solution criteria."
  version: "1.0.0"

  node_types:

    circumstance:
      name: "circumstance"
      description: "Contextual triggers or situations that set up the job. External facts, environment, constraints."
      is_terminal: false
      llm_prompt: |
        Situational context or setup that triggers the job.
        Examples: 'busy morning', 'running late for work', 'limited fridge space', 'making coffee at home', 'hot weather'
        NOT: struggles, jobs, desired outcomes, or solutions.
      examples:
        - "busy morning"
        - "making coffee at home"
        - "limited fridge space"

    struggle:
      name: "struggle"
      description: "The friction, frustration, or difficulty the consumer faces in the circumstance."
      is_terminal: false
      llm_prompt: |
        The specific friction or difficulty experienced in the circumstance.
        Examples: 'plant milks taste thin', 'foam collapses instantly', 'coffee ritual feels unsatisfying', 'spills easily', 'not consistent'
        Focus on negative tension or undesirable current state.
      examples:
        - "plant milks taste thin"
        - "foam collapses"
        - "ritual feels unsatisfying"

    functional_job:
      name: "functional_job"
      description: "The practical progress the consumer is trying to make (what they are trying to get done)."
      is_terminal: false
      llm_prompt: |
        The practical progress the user is trying to make. The JOB to be done.

        **Functional jobs describe WHAT THE USER IS TRYING TO ACCOMPLISH:**
        - Task completion: 'create a satisfying coffee texture', 'prepare coffee quickly'
        - Maintain state: 'maintain consistent flavor', 'keep coffee hot'
        - Avoid problems: 'avoid mess', 'prevent waste', 'reduce cleanup time'
        - Achieve result: 'get energy boost', 'wake up properly'

        **Critical distinction:**
        - Functional job = THE ACTION/PROGRESS user seeks (e.g., "create satisfying texture")
        - Solution attribute = THE FEATURE that enables it (e.g., "enzyme process")
        - Desired outcome = THE SUCCESS CRITERIA (e.g., "stable foam for 2 minutes")

        **Decision test:** Does this describe what the user is TRYING TO DO?
        - YES = functional_job
        - NO, it's a product feature = solution_attribute
        - NO, it's how user measures success = desired_outcome
        - NO, it's about feelings/identity = emotional_job or social_job
      examples:
        - "create satisfying coffee texture"
        - "maintain consistent flavor"
        - "prepare coffee quickly"
        - "avoid mess"

    emotional_job:
      name: "emotional_job"
      description: "The internal emotional progress or state the consumer seeks."
      is_terminal: false
      llm_prompt: |
        Emotional progress or internal state the user is aiming for.
        Examples: 'feel confident in morning routine', 'feel treated', 'feel less stressed', 'feel like a coffee person'
        NOT: functional outcomes or values.
      examples:
        - "feel confident"
        - "feel treated"
        - "feel less stressed"

    social_job:
      name: "social_job"
      description: "The progress they seek relative to others (identity, social perception)."
      is_terminal: false
      llm_prompt: |
        Social meaning or identity the user seeks to express or maintain.
        Examples: 'appear knowledgeable about coffee', 'signal healthy choices', 'avoid looking inexperienced'
      examples:
        - "signal healthy choices"
        - "appear knowledgeable"

    desired_outcome:
      name: "desired_outcome"
      description: "Success criteria or measures of progress—what 'good enough' looks like."
      is_terminal: false
      llm_prompt: |
        Clear, measurable criteria for 'progress achieved'. HOW the user knows the job is done successfully.

        **Desired outcomes are OBSERVABLE SUCCESS CRITERIA:**
        - Measurable states: 'stable foam for 2 minutes', 'no separation in coffee'
        - Consistency: 'consistent creaminess every morning', 'predictable taste'
        - Quality thresholds: 'rich enough flavor', 'acceptable sweetness level'
        - Absence of problems: 'no mess', 'no waste', 'no aftertaste'

        **Critical distinction:**
        - Desired outcome = HOW USER MEASURES SUCCESS (e.g., "stable foam for 2 minutes")
        - Functional job = WHAT USER IS TRYING TO DO (e.g., "create satisfying texture")
        - Solution attribute = PRODUCT FEATURE (e.g., "barista formula")

        **Examples of job → desired outcome:**
        - "create satisfying texture" (job) → "stable foam for 2 minutes" (outcome)
        - "avoid mess" (job) → "no spills" (outcome)
        - "maintain flavor" (job) → "consistent taste every time" (outcome)

        **Decision test:** Does this describe a MEASURABLE result that indicates success?
        - YES = desired_outcome
        - NO, it's what user is trying to do = functional_job
        - NO, it's a product feature = solution_attribute
      examples:
        - "stable foam for 2 minutes"
        - "consistent creaminess"
        - "no separation in coffee"
        - "predictable taste"

    solution_attribute:
      name: "solution_attribute"
      description: "Solution mechanism, ingredient, feature, or technology the respondent mentions as relevant."
      is_terminal: false
      llm_prompt: |
        Specific features, mechanisms, ingredients, or product characteristics mentioned as enablers.

        **Solution attributes are OBSERVABLE PRODUCT FEATURES:**
        - Ingredients: 'Scandinavian oats', 'enzyme process', 'higher protein formula', 'no thickeners'
        - Technologies: 'barista formula', 'special fermentation', 'proprietary blend'
        - Physical properties: 'thick texture', 'creamy consistency', 'stable foam'
        - Features: 'convenient packaging', 'resealable cap', 'single-serve portions'

        **NOT solution attributes (these are outcomes/jobs):**
        - Desired outcomes: "stable foam for 2 minutes" (this is an outcome, not a feature)
        - Performance: "easy to mix" (this is what it does, not what it is)
        - Jobs: "create satisfying texture" (this is the job, not the solution)

        **Decision test:** Is this something the product HAS or IS?
        - YES = solution_attribute (e.g., "enzyme process")
        - NO, it's what the product ACHIEVES = desired_outcome
        - NO, it's what the USER WANTS TO DO = functional_job
      examples:
        - "enzyme process"
        - "no thickeners"
        - "Scandinavian oats"
        - "barista formula"

    constraint:
      name: "constraint"
      description: "Trade-offs or boundaries that limit acceptable solutions."
      is_terminal: true
      llm_prompt: |
        Hard constraints, boundaries, dealbreakers, or non-negotiables.
        Examples: 'must be natural', 'must not add sugar', 'cannot be expensive', 'no artificial additives'
        These are terminal nodes in JTBD (they do not ladder up).
      examples:
        - "must be natural"
        - "cannot be expensive"

  edge_types:

    triggers:
      name: "triggers"
      description: "Circumstance leads to or sets up the struggle."
      valid_sources: ["circumstance"]
      valid_targets: ["struggle"]
      llm_prompt: |
        Use when the situation directly creates or exposes a struggle.
        Example: 'busy morning' → triggers → 'no time to fix bad foam'

    leads_to:
      name: "leads_to"
      description: "A causes or enables B in JTBD causal hierarchy."
      valid_sources: ["struggle", "functional_job", "emotional_job", "social_job", "solution_attribute"]
      valid_targets: ["functional_job", "emotional_job", "social_job", "desired_outcome"]
      llm_prompt: |
        Use for upward causal flow:
        - struggle → functional_job
        - functional_job → emotional_job
        - functional_job → desired_outcome
        - emotional/social jobs → desired_outcome
        Must reflect causality, not chronology.

    helps_with:
      name: "helps_with"
      description: "A solution attribute helps accomplish a job or desired outcome."
      valid_sources: ["solution_attribute"]
      valid_targets: ["functional_job", "emotional_job", "social_job", "desired_outcome"]
      llm_prompt: |
        Use when the respondent names a feature/attribute that helps complete a job or achieve a desired outcome.
        Example: 'enzyme process' → helps_with → 'consistent creaminess'

    blocks:
      name: "blocks"
      description: "A constraint or obstacle that prevents progress."
      valid_sources: ["circumstance", "constraint", "struggle"]
      valid_targets: ["functional_job", "desired_outcome"]
      llm_prompt: |
        Use when the respondent states something that prevents progress.
        Example: 'no time' → blocks → 'prepare a good coffee'

    relates_to:
      name: "relates_to"
      description: "Ambiguous or thematic linkage when causal direction is unclear."
      valid_sources: ["circumstance", "struggle", "functional_job", "emotional_job", "social_job", "desired_outcome", "solution_attribute", "constraint"]
      valid_targets: ["circumstance", "struggle", "functional_job", "emotional_job", "social_job", "desired_outcome", "solution_attribute", "constraint"]
      llm_prompt: |
        Use when relationship is present but not clearly causal.
        Examples: 'reminds me of mornings in Italy', 'similar to barista milk'

  extraction_guidance: |
    Node classification priorities:
    - Circumstance = context
    - Struggle = problem/tension
    - Functional job = practical progress
    - Emotional/Social job = internal/identity progress
    - Desired outcome = measurable success
    - Solution attribute = features/technologies
    - Constraint = non-negotiables

    Always prefer the more concrete node type when uncertain.

    Edge selection:
    - Situation → Struggle = triggers
    - Struggle → Job = leads_to
    - Feature → Job/Outcome = helps_with
    - Constraint/Obstacle → Job/Outcome = blocks
    - If unclear: relate_using "relates_to"

metadata:
  author: "Interview Agent Team"
  created_date: "2025-01-01"
  updated_date: "2025-01-01"
