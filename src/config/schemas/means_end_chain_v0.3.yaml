schema:
  name: "means_end_chain"
  description: "Means-End Chain analysis linking product attributes to personal values through functional and psychosocial consequences."
  version: "3.0.0"

  node_types:

    attribute:
      name: "attribute"
      description: "Concrete observable product features"
      llm_prompt: |
        Physical characteristics or features that can be directly observed or measured.
        Examples: 'blue color', '500ml volume', 'smooth texture', 'contains caffeine', 'made of leather', 'has touchscreen'
        NOT: benefits, outcomes, feelings, or why it matters - only what IS observable.

    functional_consequence:
      name: "functional_consequence"
      description: "Direct, tangible outcomes from using the product"
      llm_prompt: |
        Immediate, practical results or outcomes from using a product attribute.
        Examples: 'keeps drinks cold for 6 hours', 'charges in 30 minutes', 'fits in car cupholder', 'reduces energy bill'
        Focus: WHAT the product does or enables (functional performance).
        NOT: how it makes you feel or broader life impacts - stick to direct, measurable outcomes.

    psychosocial_consequence:
      name: "psychosocial_consequence"
      description: "Personal/social meanings and feelings"
      llm_prompt: |
        Personal feelings, self-perceptions, or social meanings derived from product use.
        Examples: 'feel more organized', 'appears professional', 'reduces anxiety', 'feel trendy', 'gain respect from peers'
        Focus: psychological states, emotions, social identity, or how others perceive you.
        NOT: end-state values or functional outcomes - this is about intermediate feelings/meanings.

    value:
      name: "value"
      description: "End goals and core values"
      llm_prompt: |
        Fundamental life goals, deeply held principles, or end-state aspirations.
        Examples: 'security', 'family harmony', 'self-actualization', 'environmental responsibility', 'personal freedom', 'social belonging'
        Focus: ultimate WHY - core human values that transcend specific products.
        Must be abstract and universally meaningful - not product-specific outcomes.

edge_types:

  - name: "leads_to"
    description: "A causes or enables B vertically"
    valid_sources: ["attribute", "functional_consequence", "psychosocial_consequence"]
    valid_targets: ["functional_consequence", "psychosocial_consequence", "value"]
    llm_prompt: |
      Direct causal relationship moving UP the means-end chain (from concrete to abstract).
      Use when: A directly causes, results in, or enables B at the next level.
      Examples:
      - 'smooth texture' → 'comfortable to hold' (attribute → functional)
      - 'charges quickly' → 'reduces waiting anxiety' (functional → psychosocial)
      - 'feel confident' → 'self-actualization' (psychosocial → value)
      Must connect adjacent levels in hierarchy. NOT for lateral relationships.

  - name: "requires"
    description: "B cannot exist without A (prerequisite)"
    valid_sources: ["attribute", "functional_consequence"]
    valid_targets: ["functional_consequence", "psychosocial_consequence"]
    llm_prompt: |
      Hard dependency where B is impossible without A (stronger than enables).
      Examples:
      - 'has battery' → requires → 'wireless operation'
      - 'waterproof seal' → requires → 'use in rain'
      Use sparingly - only for true prerequisites, not just helpful factors.

  - name: "conflicts_with"
    description: "A and B are mutually incompatible"
    valid_sources: ["attribute", "functional_consequence", "psychosocial_consequence"]
    valid_targets: ["attribute", "functional_consequence", "psychosocial_consequence"]
    llm_prompt: |
      Inherent incompatibility or trade-off between two elements at same/similar levels.
      Examples:
      - 'large capacity' ↔ 'portable' (attribute ↔ attribute)
      - 'premium materials' ↔ 'affordable' (attribute ↔ functional)
      - 'feel exclusive' ↔ 'feel accessible' (psychosocial ↔ psychosocial)
      Both cannot be maximized simultaneously - represents design tension.

  - name: "relates_to"  # <-- Catch-all for ambiguous relationships
    description: "A has some stated relationship to B"
    valid_sources: ["attribute", "functional_consequence", "psychosocial_consequence", "value"]
    valid_targets: ["attribute", "functional_consequence", "psychosocial_consequence", "value"]
    llm_prompt: |
      Any relationship that doesn't fit leads_to/blocks/conflicts_with but respondent clearly links A and B.
      Always preserve exact quote. Examples:
      - Comparisons: "I prefer instant coffee [to premium]"
      - Associations: "reminds me of X"
      - Tensions: "expensive but probably worth it"
      - Conditionals: "only if I have time"
      Use this when relationship is stated but mechanism unclear.

# STRATEGIES

strategies:

  - Ensure coverage:
    objective: "All reference elements have representation in graph"


  - Resolve ambiguity:
    


  seed_expansion:
    description: "Increase graph breadth by adding new nodes"
    tactics:
      - concrete_attribute_probe
      - consequence_probe
      - specific_example

  bridge_building:
    description: "Connect isolated nodes and reveal upward links"
    tactics:
      - upward_linking
      - expectation_reality

  depth_completion:
    description: "Laddering towards values and meaning"
    tactics:
      - value_ladder
      - emotional_probe
      - causal_value_link

  dead_end_resolution:
    description: "Probe dead ends and neutral zones"
    tactics:
      - contradiction_probe
      - clarification_probe
      - example_request
      - priority_test
      - counterfactual_probe
      - negative_laddering
      - reframing_probe
      - anchor_shift
      - temporal_probe

# TACTICS

tactics:

  concrete_attribute_probe:
    intent: "Surface concrete, observable attributes"
    trigger:
      graph:
        need: seed_expansion
      semantic:
        lexical_markers: ["like", "prefer", "feature"]
    pattern:
      variants:
        - "What specifically about that matters to you?"
        - "Can you describe the part you care about most?"
    followups:
      shallow: "Can you be more specific?"
    produces_node_types: ["attribute"]
    valid_edge_types: []
    constraints:
      min_turn: 1
      max_visit_count: 3

  specific_example:
    intent: "Get a real instance to create a clear node"
    trigger:
      graph:
        need: seed_expansion
      semantic:
        lexical_markers: ["for example", "like when"]
    pattern:
      variants:
        - "Can you give me a specific example of that?"
        - "When did you last experience that?"
    followups:
      shallow: "What exactly happened?"
    produces_node_types: ["attribute"]
    valid_edge_types: ["exemplifies"]

  consequence_probe:
    intent: "Uncover functional consequences"
    trigger:
      graph:
        need: seed_expansion
      semantic:
        lexical_markers: ["helps", "so that"]
    pattern:
      variants:
        - "How does that affect your daily routine?"
        - "What does that do for you?"
    followups:
      causal: "Why does that matter?"
    produces_node_types: ["functional_consequence"]
    valid_edge_types: ["leads_to"]

  upward_linking:
    intent: "Link a functional consequence to a psychosocial one"
    trigger:
      graph:
        need: bridge_building
        conditions:
          isolation_ratio_above: 0.2
      semantic:
        lexical_markers: ["because", "so that"]
    pattern:
      variants:
        - "Why is that useful to you personally?"
        - "What does that allow you to feel?"
    followups:
      emotional: "How does that make you feel?"
    produces_node_types: ["psychosocial_consequence"]
    valid_edge_types: ["leads_to"]
    constraints:
      min_turn: 3
      max_visit_count: 2

  expectation_reality:
    intent: "Explore the gap between expectations and actual experience"
    trigger:
      graph:
        need: bridge_building
        conditions:
          isolation_ratio_above: 0.15
      semantic:
        lexical_markers: ["expected", "thought", "supposed", "actually", "really"]
    pattern:
      variants:
        - "How does the reality compare to what you expected?"
        - "What's different between what you thought would happen and what actually did?"
        - "Has your view changed since you first started using it?"
    followups:
      comparative: "Which surprised you more?"
    produces_node_types: ["psychosocial_consequence", "value"]
    valid_edge_types: ["leads_to", "blocks"]
    constraints:
      min_turn: 2
      max_visit_count: 2

  value_ladder:
    intent: "Elevate psychosocial consequence into a value"
    trigger:
      graph:
        need: depth_completion
      semantic:
        lexical_markers: ["important", "matters"]
    pattern:
      variants:
        - "Why is that important to your life overall?"
        - "What does that help you achieve long-term?"
    followups:
      emotional: "What about that feels meaningful?"
    produces_node_types: ["value"]
    valid_edge_types: ["leads_to"]
    constraints:
      min_turn: 4
      max_visit_count: 1

  emotional_probe:
    intent: "Surface emotional meaning behind outcomes"
    trigger:
      graph:
        need: depth_completion
      semantic:
        lexical_markers: ["feel", "emotional"]
    pattern:
      variants:
        - "What does that make you feel?"
        - "What does that say about you?"
    followups:
      shallow: "Why does it feel like that?"
    produces_node_types: ["psychosocial_consequence"]
    valid_edge_types: ["leads_to"]

  causal_value_link:
    intent: "Build causality between outcomes and value"
    trigger:
      graph:
        need: depth_completion
    pattern:
      variants:
        - "How does that lead to something bigger for you?"
        - "What is the deeper reason that matters?"
    followups:
      causal: "What causes that?"
    produces_node_types: ["value"]
    valid_edge_types: ["leads_to"]

  contradiction_probe:
    intent: "Explore tension or conflict"
    trigger:
      semantic:
        lexical_markers: ["but", "however"]
    pattern:
      variants:
        - "You said X, but also Y — can you help me understand?"
    followups:
      shallow: "Which is more important to you?"
    produces_node_types: ["psychosocial_consequence", "value"]
    valid_edge_types: ["blocks", "leads_to"]

  clarification_probe:
    intent: "Clarify vague or ambiguous statements to unlock causal structure"
    trigger:
      semantic:
        lexical_markers: ["it", "that", "this", "those"]
        uncertainty_markers: ["kind of", "sort of", "basically", "you know"]
    pattern:
      variants:
        - "When you say '{X}', what exactly do you mean?"
        - "Can you give a bit more detail on '{X}'?"
    followups:
      shallow: "Can you give a concrete example?"
      medium: "What does that mean for you personally?"
    produces_node_types: ["attribute", "functional_consequence"]
    valid_edge_types: ["leads_to", "enables", "exemplifies"]

  example_request:
    intent: "Ground abstract statements in concrete examples to reveal structure"
    trigger:
      semantic:
        abstraction_markers: ["always", "never", "in general", "usually"]
        missing_context: true
    pattern:
      variants:
        - "Can you give a specific example of when {X} happened?"
        - "Tell me about a time when {X} mattered to you."
    followups:
      shallow: "Why did that situation matter to you?"
      medium: "How did it affect you personally?"
    produces_node_types: ["attribute", "functional_consequence"]
    valid_edge_types: ["exemplifies", "leads_to"]
  
  priority_test:
    intent: "Resolve conflicting priorities to expose underlying values"
    trigger:
      semantic:
        lexical_markers: ["both", "and", "also"]
        dual_claims: true
    pattern:
      variants:
        - "Between {X} and {Y}, which matters more to you?"
        - "If you had to choose, what would be more important — {X} or {Y}?"
    followups:
      shallow: "Why is that more important?"
      medium: "What does that do for you?"
    produces_node_types: ["psychosocial_consequence", "value"]
    valid_edge_types: ["blocks", "leads_to"]

  counterfactual_probe:
    intent: "Explore hypothetical change to reveal hidden motivations"
    trigger:
      semantic:
        lexical_markers: ["if", "what if"]
        implicit_tradeoff: true
    pattern:
      variants:
        - "If {X} wasn’t the case, how would that change things for you?"
        - "Imagine {X} changed — what would that do for you?"
    followups:
      shallow: "Why would that matter?"
      medium: "What would that help you achieve?"
    produces_node_types: ["functional_consequence", "psychosocial_consequence", "value"]
    valid_edge_types: ["leads_to", "blocks"]

  negative_laddering:
    intent: "Uncover motivations by exploring avoided outcomes"
    trigger:
      semantic:
        lexical_markers: ["I don't want", "avoid", "hate", "worried"]
        negative_consequence: true
    pattern:
      variants:
        - "Why is it important for you to avoid {X}?"
        - "What could happen if {X} occurred?"
    followups:
      shallow: "Why would that be a problem?"
      medium: "What does that impact for you personally?"
    produces_node_types: ["psychosocial_consequence", "value"]
    valid_edge_types: ["blocks"]

  reframing_probe:
    intent: "Unlock new perspective when direct probes fail"
    trigger:
      structural:
        low_depth_progress: true
        repeated_answer: true
    pattern:
      variants:
        - "Some people value {X} for {Y}. How does that compare to your experience?"
        - "Others say {X} matters because {Y}. What about you?"
    followups:
      shallow: "Why do you feel that way?"
      medium: "What does that help you achieve?"
    produces_node_types: ["psychosocial_consequence", "value"]
    valid_edge_types: ["leads_to", "correlates_with"]

  anchor_shift:
    intent: "Redirect from unproductive attribute-level loops"
    trigger:
      structural:
        attribute_loop: true
        low_abstraction: true
    pattern:
      variants:
        - "Stepping back from {X}, why does that matter to you personally?"
        - "Beyond {X}, what does this mean in your daily life?"
    followups:
      shallow: "How does that affect you?"
      medium: "And why is that important?"
    produces_node_types: ["functional_consequence", "psychosocial_consequence"]
    valid_edge_types: ["leads_to"]

  temporal_probe:
    intent: "Use time shifts to reveal practical consequences"
    trigger:
      semantic:
        temporal_markers: ["before", "after", "now", "used to"]
    pattern:
      variants:
        - "How has {X} changed over time for you?"
        - "Before {X}, what was different?"
    followups:
      shallow: "Why did that matter?"
      medium: "What does that help you with now?"
    produces_node_types: ["functional_consequence", "psychosocial_consequence"]
    valid_edge_types: ["leads_to", "enables", "correlates_with"]

# ─────────────────────────────────────────────────────────────
# METADATA
# ─────────────────────────────────────────────────────────────

schema_description: |
  Means–End Chain lens for consumer mental models.
  Models thinking as a vertical ladder:
  Attributes → Functional Consequences → Psychosocial Consequences → Values.

author: "POC Development Team"
created_date: "2025-11-28"
