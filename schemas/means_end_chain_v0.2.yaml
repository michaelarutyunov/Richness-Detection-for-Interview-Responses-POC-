schema_version: "1.0.0"
domain: "fmcg_means_end_chain"

# ─────────────────────────────────────────────────────────────
# DOMAIN MODEL
# ─────────────────────────────────────────────────────────────

node_types:
  - name: "attribute"
    description: "Concrete observable product features"

  - name: "functional_consequence"
    description: "Direct, tangible outcomes from using the product"

  - name: "psychosocial_consequence"
    description: "Personal/social meanings and feelings"

  - name: "value"
    description: "End goals and core values"

edge_types:
  - name: "leads_to"
    description: "A causes or enables B vertically"
    valid_sources: ["attribute", "functional_consequence", "psychosocial_consequence"]
    valid_targets: ["functional_consequence", "psychosocial_consequence", "value"]

  - name: "blocks"
    description: "A prevents achieving B"
    valid_sources: ["attribute", "functional_consequence"]
    valid_targets: ["psychosocial_consequence", "value"]

  - name: "correlates_with"
    description: "A is associated with B at the same level"
    valid_sources: ["attribute", "functional_consequence", "psychosocial_consequence"]
    valid_targets: ["attribute", "functional_consequence", "psychosocial_consequence"]

  - name: "enables"
    description: "A makes B possible or easier"
    valid_sources: ["attribute", "functional_consequence"]
    valid_targets: ["attribute", "functional_consequence", "psychosocial_consequence"]

  - name: "exemplifies"
    description: "A is a specific instance of B"
    valid_sources: ["attribute", "functional_consequence", "psychosocial_consequence"]
    valid_targets: ["attribute", "functional_consequence", "psychosocial_consequence"]

# ─────────────────────────────────────────────────────────────
# SEED NODES
# ─────────────────────────────────────────────────────────────

# seed_nodes:
#  - name: "price_point"
#    type: "attribute"
#    label: "price"
#    introduction_prompt: "What are your thoughts on the pricing?"

#  - name: "convenience"
#    type: "value"
#    label: "convenience_value"
#    introduction_prompt: "How important is convenience in your daily life?"

#  - name: "product_quality"
#    type: "attribute"
#    label: "perceived_quality"
#    introduction_prompt: "What's your sense of the overall quality?"

# ─────────────────────────────────────────────────────────────
# STRATEGIES
# ─────────────────────────────────────────────────────────────

strategies:
  seed_expansion:
    description: "Increase graph breadth by adding new nodes"
    tactics:
      - concrete_attribute_probe
      - consequence_probe
      - specific_example

  bridge_building:
    description: "Connect isolated nodes and reveal upward links"
    tactics:
      - upward_linking
      - expectation_reality

  depth_completion:
    description: "Laddering towards values and meaning"
    tactics:
      - value_ladder
      - emotional_probe
      - causal_value_link

  dead_end_resolution:
    description: "Probe dead ends and neutral zones"
    tactics:
      - contradiction_probe
      - clarification_probe
      - example_request
      - priority_test
      - counterfactual_probe
      - negative_laddering
      - reframing_probe
      - anchor_shift
      - temporal_probe

# ─────────────────────────────────────────────────────────────
# TACTICS
# ─────────────────────────────────────────────────────────────

tactics:

  concrete_attribute_probe:
    intent: "Surface concrete, observable attributes"
    trigger:
      graph:
        need: seed_expansion
      semantic:
        lexical_markers: ["like", "prefer", "feature"]
    pattern:
      variants:
        - "What specifically about that matters to you?"
        - "Can you describe the part you care about most?"
    followups:
      shallow: "Can you be more specific?"
    produces_node_types: ["attribute"]
    valid_edge_types: []
    constraints:
      min_turn: 1
      max_visit_count: 3

  specific_example:
    intent: "Get a real instance to create a clear node"
    trigger:
      graph:
        need: seed_expansion
      semantic:
        lexical_markers: ["for example", "like when"]
    pattern:
      variants:
        - "Can you give me a specific example of that?"
        - "When did you last experience that?"
    followups:
      shallow: "What exactly happened?"
    produces_node_types: ["attribute"]
    valid_edge_types: ["exemplifies"]

  consequence_probe:
    intent: "Uncover functional consequences"
    trigger:
      graph:
        need: seed_expansion
      semantic:
        lexical_markers: ["helps", "so that"]
    pattern:
      variants:
        - "How does that affect your daily routine?"
        - "What does that do for you?"
    followups:
      causal: "Why does that matter?"
    produces_node_types: ["functional_consequence"]
    valid_edge_types: ["leads_to"]

  upward_linking:
    intent: "Link a functional consequence to a psychosocial one"
    trigger:
      graph:
        need: bridge_building
        conditions:
          isolation_ratio_above: 0.2
      semantic:
        lexical_markers: ["because", "so that"]
    pattern:
      variants:
        - "Why is that useful to you personally?"
        - "What does that allow you to feel?"
    followups:
      emotional: "How does that make you feel?"
    produces_node_types: ["psychosocial_consequence"]
    valid_edge_types: ["leads_to"]
    constraints:
      min_turn: 3
      max_visit_count: 2

  value_ladder:
    intent: "Elevate psychosocial consequence into a value"
    trigger:
      graph:
        need: depth_completion
      semantic:
        lexical_markers: ["important", "matters"]
    pattern:
      variants:
        - "Why is that important to your life overall?"
        - "What does that help you achieve long-term?"
    followups:
      emotional: "What about that feels meaningful?"
    produces_node_types: ["value"]
    valid_edge_types: ["leads_to"]
    constraints:
      min_turn: 4
      max_visit_count: 1

  emotional_probe:
    intent: "Surface emotional meaning behind outcomes"
    trigger:
      graph:
        need: depth_completion
      semantic:
        lexical_markers: ["feel", "emotional"]
    pattern:
      variants:
        - "What does that make you feel?"
        - "What does that say about you?"
    followups:
      shallow: "Why does it feel like that?"
    produces_node_types: ["psychosocial_consequence"]
    valid_edge_types: ["leads_to"]

  causal_value_link:
    intent: "Build causality between outcomes and value"
    trigger:
      graph:
        need: depth_completion
    pattern:
      variants:
        - "How does that lead to something bigger for you?"
        - "What is the deeper reason that matters?"
    followups:
      causal: "What causes that?"
    produces_node_types: ["value"]
    valid_edge_types: ["leads_to"]

  contradiction_probe:
    intent: "Explore tension or conflict"
    trigger:
      semantic:
        lexical_markers: ["but", "however"]
    pattern:
      variants:
        - "You said X, but also Y — can you help me understand?"
    followups:
      shallow: "Which is more important to you?"
    produces_node_types: ["psychosocial_consequence", "value"]
    valid_edge_types: ["blocks", "leads_to"]

  clarification_probe:
    intent: "Clarify vague or ambiguous statements to unlock causal structure"
    trigger:
      semantic:
        lexical_markers: ["it", "that", "this", "those"]
        uncertainty_markers: ["kind of", "sort of", "basically", "you know"]
    pattern:
      variants:
        - "When you say '{X}', what exactly do you mean?"
        - "Can you give a bit more detail on '{X}'?"
    followups:
      shallow: "Can you give a concrete example?"
      medium: "What does that mean for you personally?"
    produces_node_types: ["attribute", "functional_consequence"]
    valid_edge_types: ["leads_to", "enables", "exemplifies"]

  example_request:
    intent: "Ground abstract statements in concrete examples to reveal structure"
    trigger:
      semantic:
        abstraction_markers: ["always", "never", "in general", "usually"]
        missing_context: true
    pattern:
      variants:
        - "Can you give a specific example of when {X} happened?"
        - "Tell me about a time when {X} mattered to you."
    followups:
      shallow: "Why did that situation matter to you?"
      medium: "How did it affect you personally?"
    produces_node_types: ["attribute", "functional_consequence"]
    valid_edge_types: ["exemplifies", "leads_to"]
  
  priority_test:
    intent: "Resolve conflicting priorities to expose underlying values"
    trigger:
      semantic:
        lexical_markers: ["both", "and", "also"]
        dual_claims: true
    pattern:
      variants:
        - "Between {X} and {Y}, which matters more to you?"
        - "If you had to choose, what would be more important — {X} or {Y}?"
    followups:
      shallow: "Why is that more important?"
      medium: "What does that do for you?"
    produces_node_types: ["psychosocial_consequence", "value"]
    valid_edge_types: ["blocks", "leads_to"]

  counterfactual_probe:
    intent: "Explore hypothetical change to reveal hidden motivations"
    trigger:
      semantic:
        lexical_markers: ["if", "what if"]
        implicit_tradeoff: true
    pattern:
      variants:
        - "If {X} wasn’t the case, how would that change things for you?"
        - "Imagine {X} changed — what would that do for you?"
    followups:
      shallow: "Why would that matter?"
      medium: "What would that help you achieve?"
    produces_node_types: ["functional_consequence", "psychosocial_consequence", "value"]
    valid_edge_types: ["leads_to", "blocks"]

  negative_laddering:
    intent: "Uncover motivations by exploring avoided outcomes"
    trigger:
      semantic:
        lexical_markers: ["I don't want", "avoid", "hate", "worried"]
        negative_consequence: true
    pattern:
      variants:
        - "Why is it important for you to avoid {X}?"
        - "What could happen if {X} occurred?"
    followups:
      shallow: "Why would that be a problem?"
      medium: "What does that impact for you personally?"
    produces_node_types: ["psychosocial_consequence", "value"]
    valid_edge_types: ["blocks"]

  reframing_probe:
    intent: "Unlock new perspective when direct probes fail"
    trigger:
      structural:
        low_depth_progress: true
        repeated_answer: true
    pattern:
      variants:
        - "Some people value {X} for {Y}. How does that compare to your experience?"
        - "Others say {X} matters because {Y}. What about you?"
    followups:
      shallow: "Why do you feel that way?"
      medium: "What does that help you achieve?"
    produces_node_types: ["psychosocial_consequence", "value"]
    valid_edge_types: ["leads_to", "correlates_with"]

  anchor_shift:
    intent: "Redirect from unproductive attribute-level loops"
    trigger:
      structural:
        attribute_loop: true
        low_abstraction: true
    pattern:
      variants:
        - "Stepping back from {X}, why does that matter to you personally?"
        - "Beyond {X}, what does this mean in your daily life?"
    followups:
      shallow: "How does that affect you?"
      medium: "And why is that important?"
    produces_node_types: ["functional_consequence", "psychosocial_consequence"]
    valid_edge_types: ["leads_to"]

  temporal_probe:
    intent: "Use time shifts to reveal practical consequences"
    trigger:
      semantic:
        temporal_markers: ["before", "after", "now", "used to"]
    pattern:
      variants:
        - "How has {X} changed over time for you?"
        - "Before {X}, what was different?"
    followups:
      shallow: "Why did that matter?"
      medium: "What does that help you with now?"
    produces_node_types: ["functional_consequence", "psychosocial_consequence"]
    valid_edge_types: ["leads_to", "enables", "correlates_with"]

# ─────────────────────────────────────────────────────────────
# METADATA
# ─────────────────────────────────────────────────────────────

schema_description: |
  Means–End Chain lens for consumer mental models.
  Models thinking as a vertical ladder:
  Attributes → Functional Consequences → Psychosocial Consequences → Values.

author: "POC Development Team"
created_date: "2025-11-28"
