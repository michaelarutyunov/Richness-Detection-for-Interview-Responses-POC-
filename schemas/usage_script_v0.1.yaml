schema_version: "0.1.0"
domain: "fmcg_usage_script"

# Interview Configuration
interview_config:
  max_turns: 20  # Minimal POC scope
  latency_budget_seconds: 3.0
  coverage_priority_boost: 10
  depth_priority_boost: 8
  phase_transition_turn: 5
  dead_end_threshold: 0.5
  dead_end_probe_count: 3

# Richness Scoring
richness_scoring:
  formula: "sum(node_weights) + sum(edge_boosts)"
  thresholds:
    shallow: 0.5
    moderate: 2.0
    rich: 5.0

# Node Types
node_types:
  - name: "trigger"
    description: "Events that initiate usage (feeling hungry, seeing ad, running out)"
    richness_weight: 1.0
    probing_prompt: "What happened right before {node}?"
    llm_extraction_prompt: |
      Extract triggers - events that started the usage occasion.
      Look for: needs, external cues, time-based events, social situations.
      Examples:
      - "felt hungry at work" → hunger_trigger
      - "saw the ad on TV" → advertising_exposure
      - "kids asked for snack" → child_request
    validation_regex: "^[a-z_]{3,40}$"

  - name: "action"
    description: "Specific behaviors during usage (open package, share with kids, heat up)"
    richness_weight: 0.7
    probing_prompt: "Walk me through the steps of {node}."
    llm_extraction_prompt: |
      Extract actions - specific things the consumer did.
      Look for: physical actions, preparation steps, consumption behaviors.
      Examples:
      - "opened the package" → package_opening
      - "shared with family" → social_sharing
      - "heated for 2 minutes" → microwave_heating
    validation_regex: "^[a-z_]{3,40}$"

  - name: "outcome"
    description: "Immediate results of actions (satisfied, made a mess, kids loved it)"
    richness_weight: 1.2
    probing_prompt: "Then what happened after {node}?"
    llm_extraction_prompt: |
      Extract outcomes - what resulted from the action.
      Look for: satisfaction, dissatisfaction, unexpected effects, social responses.
      Examples:
      - "felt satisfied" → hunger_satisfied
      - "made a mess" → cleanup_needed
      - "kids loved it" → positive_family_response
    validation_regex: "^[a-z_]{3,40}$"

  - name: "setting"
    description: "Physical/social context (at work, alone, with family, in car)"
    richness_weight: 0.8
    probing_prompt: "Where were you during {node}? Who was there?"
    llm_extraction_prompt: |
      Extract settings - where and with whom the usage occurred.
      Look for: locations, social configurations, time of day, situations.
      Examples:
      - "at the office" → workplace_setting
      - "with my family at dinner" → family_mealtime
      - "in the car" → mobile_consumption
    validation_regex: "^[a-z_]{3,40}$"

  - name: "emotion"
    description: "Feelings at specific moments (relief, guilt, joy, frustration)"
    richness_weight: 1.5
    probing_prompt: "How did {node} make you feel?"
    llm_extraction_prompt: |
      Extract emotions - feelings during the usage experience.
      Look for: positive emotions, negative emotions, mixed feelings, intensity.
      Examples:
      - "felt relieved" → relief
      - "bit guilty about sugar" → guilt
      - "really happy" → joy
    validation_regex: "^[a-z_]{3,40}$"

# Edge Types
edge_types:
  - name: "happens_before"
    description: "A precedes B in time (temporal sequence)"
    valid_sources: ["trigger", "action", "outcome"]
    valid_targets: ["action", "outcome", "emotion"]
    richness_boost: 0.5  # Temporal links are baseline

  - name: "causes"
    description: "A directly brings about B (causal relationship)"
    valid_sources: ["trigger", "action"]
    valid_targets: ["outcome", "emotion"]
    richness_boost: 2.0  # Causal chains are gold - high value

  - name: "in_setting"
    description: "A occurs within context B (contextual anchoring)"
    valid_sources: ["trigger", "action", "outcome"]
    valid_targets: ["setting"]
    richness_boost: 1.0  # Context anchors the narrative

# Seed Nodes (starting concepts to ensure coverage)
seed_nodes:
  - name: "morning_routine"
    type: "setting"
    label: "morning_usage"
    introduction_prompt: "Tell me about a time you used this product in the morning. Walk me through it."

  - name: "impulse_purchase"
    type: "trigger"
    label: "unplanned_purchase"
    introduction_prompt: "Have you ever bought this product on impulse? What led to that?"

  - name: "family_consumption"
    type: "setting"
    label: "with_family"
    introduction_prompt: "Describe a time when you consumed this with your family."

# Metadata
schema_description: |
  Usage Script lens for consumer mental models.
  Models consumer experience as a temporal script - a sequence of moments,
  triggers, and actions that constitute a usage occasion.

  Best for: Understanding WHEN, WHERE, and HOW the product fits into
  consumers' lives, identifying usage occasions, and contextual marketing.

author: "POC Development Team"
created_date: "2025-11-28"
