# Default Interview Configuration
# Used when no specific interview config is provided

interview_id: "default_means_end"
schema_path: "schemas/means_end_chain_v0.1.yaml"
model_config_path: "configs/model_config.yaml"

# Participant Information
participant_id: "anonymous"
session_metadata:
  product_category: "fmcg"
  test_type: "concept_test"
  moderator: "ai_interviewer"

# Interview Behavior
max_turns: 20  # Minimal POC scope
enable_logging: true
log_directory: "data/interviews"
log_level: "INFO"

# Relationship Extraction Settings
relationship_extraction:
  mode: "balanced"  # conservative, balanced, aggressive
  confidence_threshold: 0.6  # Minimum confidence to include relationship
  enable_implicit_extraction: true  # Enable RelationshipExtractor for implicit relationships
  enable_same_level_relationships: true  # Allow correlates_with, enables edges
  max_inference_per_turn: 5  # Maximum number of inferred relationships per turn

# Opportunity Ranking Settings
opportunity_ranking:
  use_adaptive_weights: true  # Use phase-adaptive weights
  recency_decay_function: "exponential"  # linear or exponential
  enable_time_aware_recency: true  # Penalize recent visits more heavily
  enable_exhaustion_detection: true  # Skip over-explored topics
  exhaustion_visit_threshold: 3  # Visit count to mark as exhausted
  enable_epsilon_greedy: true  # Random exploration to escape local maxima
  exploration_rate_coverage: 0.3  # 30% exploration in coverage phase
  exploration_rate_depth: 0.2  # 20% exploration in depth phase
  exploration_rate_connection: 0.1  # 10% exploration in connection phase
  enable_diversity_bonus: true  # Bonus for exploring distant nodes
  diversity_weight: 1.0  # Weight for diversity bonus

# Question Generation Strategy
question_strategy:
  template_usage_probability: 0.7  # 70% use templates, 30% use LLM
  fallback_to_template_on_llm_failure: true
  # Deduplication settings
  enable_repetition_detection: true  # Enable question deduplication
  word_overlap_threshold: 0.6  # Jaccard similarity threshold for word overlap
  semantic_similarity_threshold: 0.75  # Threshold for semantic similarity detection
  history_window: 5  # Number of recent questions to check for repetition
  max_regeneration_attempts: 3  # Max attempts to regenerate if repetitive
  context_window_turns: 6  # Number of conversation turns to include in LLM context
  max_context_tokens: 2000  # Maximum tokens for conversation context (future use)

# Interview Flow Control
interview_flow:
  intro_message: |
    Welcome! I'm here to understand your thoughts about this product.
    There are no right or wrong answers - I'm just curious about your experience and perspective.
    Feel free to share as much or as little as you'd like.

  closing_message: |
    Thank you so much for sharing your thoughts! Your insights are really valuable.
    Is there anything else you'd like to add that we haven't covered?

  enable_mid_interview_summary: false  # Phase 2 feature

# Termination Criteria
termination:
  max_turns_reached: true
  graph_saturation_threshold: 0.3  # When opportunity priority drops below this
  consecutive_empty_responses: 3
  participant_disconnect_timeout_seconds: 300

# Advanced Features (for future phases)
advanced:
  enable_focus_stack: true
  enable_dead_end_detection: true
  enable_coreference_resolution: true  # Phase 2
  enable_graph_visualization: false  # Phase 5
